!function(t){t.jsmod={version:"0.1.3"},t.jsmod.ui={},t.jsmod.util={},t.jsmod.detector={},t.jsmod.style={}}(window),function(t){t.jsmod.style["jsmod.ui.IOSDialog"]={ELEMENT:{"background-color":"#f6f6f6","border-radius":"5px",padding:"10px 0 0 0"},TITLE:{color:"#000000","text-align":"center","font-size":"14px","font-weight":"bold",padding:"0 10px 5px 10px"},CONTENT:{color:"#000000","text-align":"center","font-size":"12px","line-height":"1.6em",padding:"0 10px","max-Height":"200px"}}}(window),function(t){t.jsmod.style["jsmod.ui.Confirm"]={FOOTER:{color:"#0d72de","font-size":"15px","font-weight":"bold","line-height":"2.5em","text-align":"center","border-top":"1px solid #c1c1c1",display:"-webkit-box"},BUTTON:{"-webkit-box-flex":"1","text-align":"center",width:"0",display:"block"},BUTTON_NO:{"border-right":"1px solid #c1c1c1",color:"#0d72de","text-decoration":"none"},BUTTON_OK:{color:"#0d72de","text-decoration":"none"}}}(window),function(t){t.jsmod.style["jsmod.ui.Alert"]={FOOTER:{color:"#0d72de","font-size":"14px","font-weight":"bold","line-height":"2.5em","text-align":"center","border-top":"1px solid #c1c1c1"}}}(window),function(t){t.jsmod.style["jsmod.ui.Toast"]={ELEMENT:{"background-color":"rgba(51, 51, 51, 0.85)",color:"#f6f6f6","border-radius":"5px","font-size":"12px","line-height":"1.6em",padding:"5px"}}}(window),function(t){t.jsmod.style["jsmod.ui.Banner"]={BOTTOM_BAR:{position:"absolute",padding:"5px;",bottom:0,left:0,right:0,"font-size":"12px","line-height":"20px",height:"20px","background-color":"rgba(0, 0, 0, 0.7)",color:"#fff","z-index":"1"},IMAGE:{opacity:0,"-webkit-transition":"opacity 0.3s"}}}(window),function(t){var i,e,o=t.jsmod.detector;e="undefined"!=typeof navigator?navigator.userAgent:"",o.isAnimation=function(){return!!$.fx},o.os=function(){return i},i=function(t){function i(i){var e=t.match(i);return e&&e.length>1&&e[1]||""}if(!t)return{};var e,o=i(/(ipod|iphone|ipad)/i).toLowerCase(),n=/like android/i.test(t),s=!n&&/android/i.test(t),a=i(/version\/(\d+(\.\d+)?)/i),r=(/tablet/i.test(t),!0);o?(e={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},a&&(e.version=a)):e=s?{name:"Android",version:a}:{},s?(e.android=r,e.os="android"):o&&(e[o]=r,e.ios=r,e.os="ios");var l="";return o?(l=i(/os (\d+([_\s]\d+)*) like mac os x/i),l=l.replace(/[_\s]/g,".")):s&&(l=i(/android[ \/-](\d+(\.\d+)*)/i)),l&&(e.osversion=l),e}(e)}(window),function(t){function i(){return!1}function e(){return!0}function o(t,i){this.type=this.name=t,i&&$.extend(this,i)}function n(t){return t._zid||(t._zid=r++)}function s(t,i,e){return(a[n(t)]||[]).filter(function(t){return!(!t||i&&i!=t.name||e&&e!=t.fn)})}var a={},r=1;o.prototype={isDefaultPrevented:i,isPropagationStopped:i,preventDefault:function(){this.isDefaultPrevented=e},stopPropagation:function(){this.isPropagationStopped=e}},t.jsmod.util.EventCreator=o,t.jsmod.util.Event={on:function(t,i,e){var o=n(this),s=a[o]||(a[o]=[]);return e=e||this,s.push({fn:i,name:t,i:s.length,context:e}),this},off:function(t,i){var e=n(this);s(this,t,i).forEach(function(t){delete a[e][t.i]})},trigger:function(t,i){{var e;n(this)}return e="object"==typeof t?t:new o(t),t=t&&t.type||t,s(this,t).forEach(function(t){return t.fn.apply(t.context,[e].concat(i))===!1||e.isPropagationStopped&&e.isPropagationStopped()?!1:void 0}),e}}}(window),function(t){function i(t,i){for(key in i)void 0!==i[key]&&(t[key]=i[key])}t.jsmod.util.extend=function(t){var e=[].slice.call(arguments,1);return e.forEach(function(e){i(t,e)}),t}}(window),function(t){function i(t,i){for(var e in t)if(i.call(t[e],e,t[e])===!1)return t;return t}var e=t.jsmod,o=e.util;o.klass=function(t,e,n){var s;return e?s=o.inherit(e,t,n):(s=function(){this.initialize&&this.initialize.apply(this,Array.prototype.slice.call(arguments,0))},i([t].concat(n||[]),function(t,e){i("function"==typeof e?e.prototype:e,function(i,e){"function"==typeof e&&(0==t||0!=t&&"initialize"!=i)&&(s.prototype[i]=e)})})),s},o.inherit=function(t,e,o){var n,s=function(){};return s.prototype=t.prototype,n=function(){this.initialize&&this.initialize.apply(this,Array.prototype.slice.call(arguments,0))},n.prototype=new s,n.prototype.constructor=n,i([e].concat(o||[]),function(t,e){i("function"==typeof e?e.prototype:e,function(i,e){"function"==typeof e&&(0==t||0!=t&&"initialize"!=i)&&(n.prototype[i]=e)})}),n}}(window),function(t){var i,e=document,o={offset:50,isFade:!0,isLoop:!1},n=[];i=t.jsmod.util.lazy={start:function(t){$.extend(o,t),o.isFade=jsmod.detector.isAnimation()?o.isFade:!1,!this.isStart()&&this._start()},stop:function(){this._isStart=!1,this._setLoopTimer&&clearTimeout(this._setLoopTimer),this._observerIns&&this._observerIns.disconnect(),$(t).off("scroll.lazy").off("resize.lazy")},clear:function(){n=[]},isStart:function(){return!!this._isStart},add:function(t){this._checkVisible(t)?this._show(t):-1===$.inArray(t,n)&&(t._lazyIndex=n.length,n.push(t))},getBase64:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA1JREFUeNoBAgD9/wAAAAIAAVMrnDAAAAAASUVORK5CYII="},_start:function(){var i=this,e=this._getCheckFun(this._loopElement),n=function(t){i._setLoopTimer=setTimeout(function(){t(),n(t)},30)};this._isStart=!0,$(t).on("scroll.lazy",e).on("resize.lazy",e),"function"==typeof window.MutationObserver?this._observer(e):o.isLoop&&n(e)},_loopElement:function(){var t=this;$.each(n,function(i,e){e&&t._checkVisible(e)&&(t._show(e),delete n[e._lazyIndex])})},_show:function(t){var i=$(t);o.isFade&&"1"!=i.attr("lazyed")&&i.one("load",function(){i.animate({opacity:1})}).css("opacity",0),i.prop("src",i.data("src")).attr("lazyed","1")},_checkVisible:function(t){var i,n,s,a,r={width:o.offset,height:o.offset};return r.width+=e.documentElement.clientWidth,r.height+=e.documentElement.clientHeight,n=t.getBoundingClientRect(),i={bottom:e.body.scrollHeight,top:0,left:0,right:e.body.scrollWidth},s={left:n.left,top:n.top},a=!(n.right<i.left||n.left>i.right||n.bottom<i.top||n.top>i.bottom)&&s.top<=r.height&&s.left<=r.width},_observer:function(t){function i(){setTimeout(t,10)}{var o=new MutationObserver(i);Array.prototype.filter}this._observerIns=o,o.observe(e.body,{childList:!0,subtree:!0})},_getCheckFun:function(t){var i,e=this;return function(){var o=arguments;clearTimeout(i),i=setTimeout(function(){i=null,t.apply(e,o)},30)}}}}(window),function(t){var i,e=10;t.jsmod.util.merge={merge:function(t,o,n,s){return t=n?this.merge({},t,void 0,s):t,i=s||e,this._merge(t,o,0),t},_merge:function(t,e,o){for(var n in e)t[n]=$.isPlainObject(e[n])&&i>o?this._merge(t[n]||{},e[n],++o):e[n];return t}}}(window),function(t){jsmod.ui.Base=t.jsmod.util.extend({setStyle:function(t){this._style=this._style?this.merge(this._style,t,!0):t||{}},getStyle:function(t,i){var e;return this._style&&(e=this._style[t])?i?(e=$.map(e,function(t,i){return i+":"+t}),e.join(";")):e:null},templateEngine:function(t,i){var e={};return(template=function o(t,i){var n=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):e[t]=e[t]||o(document.getElementById(t).innerHTML);return i?n(i):n})(t,i)}},jsmod.util.Event,t.jsmod.util.merge)}(window),function(){var t;t={isMask:!0,isMaskClickHide:!0,isAutoShow:!1,isIScroll:!1,isAnimation:!0,isScaleAnimation:!1,isScrollAble:!1,isInFixed:!0,maskIndex:1e3,opacity:.7,animateCount:133,IScrollOption:{mouseWheel:!1,scrollbars:!0}},jsmod.ui.Dialog=jsmod.util.klass({initialize:function(i){var e=this;e.option=$.extend({},t,i),e.resetFrame(),e._callBackStack=[],e._root=e.option.isInFixed?e.createRootEl().appendTo(e._mask):e.createRootEl(),e._element=$(e.option.element?e.option.element:e.option.html),e._root.append(e._element),e.option.isAnimation=jsmod.detector.isAnimation()?e.option.isAnimation:!1,e.maxHeight=e.option.maxHeight||parseInt(.9*$(window).height()),e.maxWidth=e.option.maxWidth||parseInt(.9*$(window).width()),e.setBox(),e.option.isAutoShow&&e.show(),jsmod.ui.Dialog.addInstance(this),jsmod.ui.Dialog.listen()},setBox:function(){var t,i,e=this,o=e.option;t=parseInt(/%$/.test(o.width)?$(window).width()*(parseInt(o.width)/100):o.width),i=parseInt(/%$/.test(o.height)?$(window).height()*(parseInt(o.height)/100):o.height),t>e.maxWidth&&(t=e.maxWidth),i>e.maxHeight&&(i=e.maxHeight),e._root.css({width:t,height:i,"box-sizing":"border-box"}),e._element.css({width:t,height:i,"box-sizing":"border-box"})},createMaskEl:function(){var t='<div class="mod-dialog-frame"style="overflow:auto; display:none; position: fixed; left:0; top: 0; right:0; bottom: 0; z-index: '+this.option.maskIndex+';"></div>';return $(t)},createRootEl:function(){var t='<div style="overflow:hidden; position: absolute; z-index: '+(this.option.maskIndex+1)+';"class="mod-dialog-wrap"></div>';return $(t)},resetFrame:function(){var t=this,i=t.option;t._mask||(t._mask=t.createMaskEl(),t._mask.on("touchstart",function(t){!i.isScrollAble&&t.preventDefault()}),i.isMaskClickHide&&t._mask.on("tap",function(i){i.target==t._mask.get(0)&&t.hide()})),t._mask.css("background-color","rgba(0, 0, 0,"+i.opacity+")")},show:function(){var t=this;t.isShown()||t.trigger("beforeshow").isDefaultPrevented()||(t._mask.show().appendTo(document.body),t.option.isInFixed||t._root.show().appendTo(document.body),t.createIscroll(),t.adjuestPosition(),t.trigger("shown"),t.option.shownCallback&&t.option.shownCallback.apply(t),t.option.isAnimation&&t._mask.css({opacity:.01,"-webkit-transform":t.option.isScaleAnimation?"scale(1.1)":"scale(1)"}).animate({opacity:1,"-webkit-transform":"scale(1)"},t.option.animateCount,"linear",function(){for(;t._callBackStack.length;)t._callBackStack.shift()()}))},isShown:function(){return!("none"==this._mask.css("display"))},resetIScrollHeight:function(){var t,i,e,o,n,s=this;n=s._element.find(".mod-dialog-iscroll-wrap"),n.css("height","auto"),t=o=s._element.height(),s._element.find(".mod-dialog-header-wrap")&&(i=s._element.find(".mod-dialog-header-wrap").height(),o-=i),s._element.find(".mod-dialog-footer-wrap")&&(e=s._element.find(".mod-dialog-footer-wrap").height(),o-=e),n.height(o).css({overflow:"hidden",position:"relative"})},createIscroll:function(){var t=this,i=t.option;i.isIScroll&&this._element.find(".mod-dialog-iscroll-wrap").length&&!this.iscroll?(t.resetIScrollHeight(),this.iscroll=new IScroll(t._element.find(".mod-dialog-iscroll-wrap").get(0),{mouseWheel:!0,scrollbars:!0})):t.iscroll&&(t.resetIScrollHeight(),t.iscroll.refresh())},resetDialog:function(){var t=this;this.iscroll&&this.resetIScrollHeight(),this.adjuestPosition(),this.iscroll&&setTimeout(function(){t.iscroll.refresh()},100)},_createContextBind:function(t,i){return $.proxy(t,i)},hide:function(){var t,i=this;i.isShown()&&(this.trigger("beforehide").isDefaultPrevented()||(t=i._createContextBind(function(){this._mask.css({opacity:"1","-webkit-transform":"scale(1)"}).hide().remove(),this.option.isInFixed||this._root.remove(),this.trigger("hidden"),this.option.hiddenCallback&&this.option.hiddenCallback.apply(this)},this),i._callBackStack.push(t),i.option.isAnimation?i._mask.animate({opacity:0,"-webkit-transform":this.option.isScaleAnimation?"scale(1.1)":"scale(1)"},i.option.animateCount,"linear",function(){for(;i._callBackStack.length;)i._callBackStack.shift()()}):(i._mask.hide().remove(),i.option.isInFixed||i._root.remove(),i.trigger("hidden"),i.option.hiddenCallback&&i.option.hiddenCallback.apply(this))))},adjuestPosition:function(){var t,i,e,o,n,s,a=this,r=a.option.offset||{};t=a._mask.height(),i=a._mask.width(),e=a._root.height(),o=a._root.width(),n=t/2-e/2+(r.top||0),s=i/2-o/2+(r.left||0),n=0>n?0:n,s=0>s?0:s,a.option.isInFixed||(n+=$(window).scrollTop()),a._root.css("top",n),a._root.css("left",s)},getElement:function(){return this._element},destroy:function(){this._mask.remove(),this._mask=null}},null,jsmod.ui.Base),jsmod.ui.Dialog._instances=[],jsmod.ui.Dialog.addInstance=function(t){-1==$.inArray(t,this._instances)&&(t._insI=jsmod.ui.Dialog._instances.length,this._instances.push(t))},jsmod.ui.Dialog.getInstances=function(){return this._instances},jsmod.ui.Dialog.removeAll=function(){this._instances.forEach(function(t){t&&void 0!==t._insI&&(t.destroy(),delete jsmod.ui.Dialog._instances[t._insI])}),this._isListening=!1,this.resizeTimer&&clearTimeout(this.resizeTimer),$(window).off("resize.dialog")},jsmod.ui.Dialog.listen=function(){var t=this;t._isListening||(t._isListening=!0,$(window).on("resize.dialog",function(){t.resizeTimer&&clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){t.getInstances().forEach(function(t){t&&t.isShown()&&t.adjuestPosition()})},300)}))}}(window),function(){var t={isMaskClickHide:!1,opacity:.3,width:"80%",maxWidth:500,isIScroll:!0,align:"left",isAutoShow:!0,title:"",html:""},i='<div class="mod-dialog-header-wrap"></div>',e='<div class="mod-dialog-iscroll-wrap"><div class="mod-dialog-iscroll-wrap-inner"></div></div>',o='<div class="mod-dialog-ios"></div>',n=jsmod.util.klass({initialize:function(i){this.setStyle(i.style?this.merge(jsmod.style["jsmod.ui.IOSDialog"],i.style,!0):jsmod.style["jsmod.ui.IOSDialog"]),i=$.extend({},t,i),this.initDom(i),jsmod.ui.Dialog.prototype.initialize.apply(this,[i]),this._initEvent(i)},setFooter:function(){throw new Error("需实现setButton")},_initEvent:function(){throw new Error("需实现initEvent")},setOption:function(t){var i=this;t.title&&i._iosDialogTitle.html(t.title),t.html&&i._iosDialogContent.find(".mod-dialog-iscroll-wrap-inner").html(t.html),i.setFooter(t,!0),i.isShown()&&i.resetDialog()},initDom:function(t){var n=this;n._iosDialogElement=t.element=$(o).css(n.getStyle("ELEMENT")),t.title&&(n._iosDialogTitle=$(i).html(t.title).appendTo(n._iosDialogElement).css(n.getStyle("TITLE"))),t.html&&(n._iosDialogContent=$(e).appendTo(n._iosDialogElement).css(n.getStyle("CONTENT")).css("text-align",t.align),n._iosDialogContent.find(".mod-dialog-iscroll-wrap-inner").html(t.html)),n.setFooter(t)},resetPrevent:function(){this._preventHide=!1},preventHide:function(){this._preventHide=!0}},jsmod.ui.Dialog);jsmod.ui.IOSDialog=n}(),function(){var t={buttonOk:"好",buttonNo:"取消",align:"center"},i='<div class="mod-dialog-footer-wrap"><a href="javascript:void(0);" class="mod-dialog-button-no"></a><a href="javascript:void(0);" class="mod-dialog-button-ok"></a></div>',e=jsmod.util.klass({initialize:function(i){this.setStyle(i.style?this.merge(jsmod.style["jsmod.ui.Confirm"],i.style,!0):jsmod.style["jsmod.ui.Confirm"]),i=$.extend({},t,i),jsmod.ui.IOSDialog.prototype.initialize.apply(this,[i])},setFooter:function(t,e){var o=this;e||(o._footerCotnent=$(i).appendTo(o._iosDialogElement).css(o.getStyle("FOOTER")),o._footerCotnent.find(".mod-dialog-button-no, .mod-dialog-button-ok").css(o.getStyle("BUTTON")),o._buttonNo=o._footerCotnent.find(".mod-dialog-button-no").css(o.getStyle("BUTTON_NO")),o._buttonOk=o._footerCotnent.find(".mod-dialog-button-ok").css(o.getStyle("BUTTON_OK"))),t.buttonNo&&o._buttonNo.html(t.buttonNo),t.buttonOk&&o._buttonOk.html(t.buttonOk)},_initEvent:function(){var t=this;t._buttonNo.on("tap",function(){t.resetPrevent(),t.option.buttonCallback&&t.option.buttonCallback.apply(t,[0]),t._preventHide||t.hide()}),t._buttonOk.on("tap",function(){t.resetPrevent(),t.option.buttonCallback&&t.option.buttonCallback.apply(t,[1]),t._preventHide||t.hide()})}},jsmod.ui.IOSDialog);jsmod.ui.Confirm=e}(),function(){var t={button:"关闭",align:"center"},i='<div class="mod-dialog-footer-wrap"></div>',e=jsmod.util.klass({initialize:function(i){"string"==typeof i&&(i={html:i}),this.setStyle(i.style?this.merge(jsmod.style["jsmod.ui.Alert"],i.style,!0):jsmod.style["jsmod.ui.Alert"]),i=$.extend({},t,i),jsmod.ui.IOSDialog.prototype.initialize.apply(this,[i])},setFooter:function(t,e){var o=this;t.button&&(e?o._alertButton.html(t.button):o._alertButton=$(i).html(t.button).appendTo(o._iosDialogElement).css(this.getStyle("FOOTER")))},_initEvent:function(){var t=this;t._alertButton&&t._alertButton.on("tap",function(){t.resetPrevent(),t.option.buttonCallback&&t.option.buttonCallback.apply(t),t._preventHide||t.hide()})}},jsmod.ui.IOSDialog);jsmod.ui.Alert=e}(),function(){var t={isMaskClickHide:!0,opacity:0,width:"90%",isIScroll:!1,isScaleAnimation:!1,maskIndex:1001,isScrollAble:!0,isAutoShow:!0,align:"center",autoHideCount:3e3,text:"",pos:.8},i='<div class="mod-dialog-toast"></div>',e=jsmod.util.klass({initialize:function(i){"string"==typeof i&&(i={text:i}),i=$.extend({},t,i),this.setStyle(i.style?this.merge(jsmod.style["jsmod.ui.Toast"],i.style,!0):jsmod.style["jsmod.ui.Toast"]),this.initDom(i),i.pos<1&&(i.offset={left:0,top:parseInt($(window).height()*(.5-(1-i.pos)))}),jsmod.ui.Dialog.prototype.initialize.apply(this,[i]),this._initEvent(i)},_initEvent:function(t){var i=this;0!==t.autoHideCount&&(i.hideTimer=setTimeout(function(){i.isShown()&&i.hide()},t.autoHideCount),i.on("hidden",function(){i.hideTimer&&clearTimeout(i.hideTimer),i.destroy()}))},initDom:function(t){var e=this;e._totastElement=t.element=$(i).css(this.getStyle("ELEMENT")),t.text&&e._totastElement.html(t.text).css("text-align",t.align)}},jsmod.ui.Dialog);jsmod.ui.Toast=e}(),function(){var t;t={count:1,interval:500,current:0};var i=jsmod.util.klass({initialize:function(i,e){var o=this;o.$element=$(i),o.option=$.extend({},t,e),e.htmls?(o.total=o.option.htmls.length,o.htmlMode=!0):(o.total=o.$element.find(".mod-carousel-item").length,o.htmlMode=!1),o.init()},createDom:function(){var t,i=this,e=i.option;i.$list=$('<ul class="mod-carousel"></ul>').css({overflow:"hidden",display:"block"}),i.$items=$(),i.htmlMode?(1==e.count&&i.total>1&&(e.htmls.push(e.htmls[0]),e.htmls.unshift(e.htmls[i.total-1])),$.each(e.htmls,function(t,o){var n;1==e.count&&i.total>1&&(t-=1),n=$('<li style="display:inline-block;float:left;" class="mod-carousel-item"></li>').attr("data-index",t).html(o),i.$items=i.$items.add(n)}),i.$list.append(i.$items)):((t=i.$element.find(".mod-carousel-item")).each(function(o){1==e.count&&0==o&&i.total>1&&(i.$items=i.$items.add(t.last().clone().attr("data-index",-1))),i.$items=i.$items.add($(this).attr("data-index",o)),1==e.count&&o==i.total-1&&i.total>1&&(i.$items=i.$items.add(t.first().clone().attr("data-index",i.total)))}),i.$items.css({display:"inline-block","float":"left"}),i.$list.append(i.$items)),i.itemWidth=parseFloat((i.$element.width()/e.count).toFixed(2)),i.$items.width(i.itemWidth),i.$list.width(i.itemWidth*i.$items.length)},init:function(){var t=this,i=t.option;t.createDom(),t.$element.css({position:"relative",overflow:"hidden"}).append(t.$list),t.scroll=new IScroll(t.$element.get(0),{scrollX:1==t.total&&1==i.count?!1:!0,scrollY:!1,snapThreshold:.13,snapSpeed:500,snap:1==i.count?".mod-carousel-item":!1,eventPassthrough:!0,bounce:1==t.option.count?!1:!0,disableMouse:!0,disablePointer:!0,disableTouch:i.disableTouch||!1,momentum:1==t.option.count?!1:!0,scrollbars:t.option.scrollbars||!1}),1==i.count&&(t.cur(i.current,void 0,!0),t.scroll.on("scrollEnd",function(){0==this.currentPage.pageX?t.cur(t.total-1,void 0,!0):this.currentPage.pageX==t.total+1?t.cur(0,void 0,!0):t.setCur(this.currentPage.pageX-1,void 0,!0)}))},pre:function(t){return this.cur(this.index-1,t)},next:function(t){return this.cur(this.index+1,t)},cur:function(t,i,e){var o,n=this,s=n.option;if(!(s.count>1))return o=e?0:n.option.interval,n.scroll.goToPage(t+1,0,o),n.setCur(t==n.total?0:-1==t?n.total-1:t)},setCur:function(t){var i=this;return void 0!==i.index&&i.getItem(i.index).removeClass("mod-carousel-item-cur"),i.index=t,i.getItem(i.index).addClass("mod-carousel-item-cur"),i.trigger("active",[t]),t},getItem:function(t){var i=this;return this.$items.filter(function(e){return $(this).data("index")==t?!0:1==i.option.count&&0==t&&e==i.total+2-1?!0:1==i.option.count&&t==i.total-1&&0==e?!0:1==i.option.count&&t==i.total&&0==$(this).data("index")?!0:void 0})},getElement:function(){return this.$element},getCurIndex:function(){return this.index},destroy:function(){this.$list.remove(),this.$list=null,this.scroll.destroy()}},null,jsmod.ui.Base);jsmod.ui.Carousel=i}(window),function(){var t='<div style="position:relative;overflow:hidden;width:<%= info.width%>px;height:<%= info.height%>px"><% if (data.title) { %><span style="<%= style.BOTTOM_BAR %>"><%= data.title %></span><% } %><img data-src="<%= data.src %>" style="<%= style.IMAGE %>"></div>',i={count:1,current:0,autoRunInterval:5e3,isAutoRun:!0,isBlank:!1,isDisplayAll:!1},e=jsmod.util.klass({initialize:function(t){this.setStyle(t.style?this.merge(jsmod.style["jsmod.ui.Banner"],t.style,!0):jsmod.style["jsmod.ui.Banner"]),t=$.extend({},i,t),t.htmls=this._createHTMLS(t.datas,t),jsmod.ui.Carousel.prototype.initialize.apply(this,[t.element,t]),this._bannerEvents()},_bannerEvents:function(){var t=this;t.$element.find("img").on("load",function(){var i,e,o,n=this.width,s=this.height,a=$(this).parent().width(),r=$(this).parent().height();o=t.option.isDisplayAll?Math.min(a/n,r/s):Math.max(a/n,r/s),i=parseInt(o*n,10)||a,e=parseInt(o*s,10)||r,$(this).css({width:i+"px",height:e+"px","margin-top":parseInt((r-e)/2,10),"margin-left":parseInt((a-i)/2,10),opacity:1})}),t.$element.on("click",".mod-carousel-item-cur",function(){var i,e;i=(e=t.option.datas[$(this).data("index")])&&e.href,i?t.option.isBlank?window.open(i):window.location.href=i:""}),t.on("active",function(i,e){t._loadIndex(e),t.option.isAutoRun&&t.option.datas.length>1&&t._autoRunFun()}),t._loadIndex(t.option.current),t.option.isAutoRun&&t.option.datas.length>1&&(t._autoRunFun(),t.scroll.on("scrollStart",function(){t._autoRunTimer&&clearTimeout(t._autoRunTimer)}))},_autoRunFun:function(){var t=this;t._autoRunTimer&&clearTimeout(t._autoRunTimer),t._autoRunTimer=setTimeout(function(){t.next()},t.option.autoRunInterval)},_loadIndex:function(t){var i,e;i=this.getItem(t).find("img"),i.data("is-load")||i.prop("src",i.data("src")).data("is-load",!0),e=this.getItem(t+1).find("img"),e.length&&!e.data("is-load")&&e.prop("src",e.data("src")).data("is-load",!0)},_createHTMLS:function(i,e){var o=this,n={width:$(e.element).width(),height:$(e.element).height()},s={IMAGE:o.getStyle("IMAGE",!0),BOTTOM_BAR:o.getStyle("BOTTOM_BAR",!0)};return $.map(i,function(i){return o.templateEngine(t,{info:n,data:i,style:s})})}},jsmod.ui.Carousel);jsmod.ui.Banner=e}(window),function(t){var i;i={animateCount:300};var e=jsmod.util.klass({initialize:function(t){var e=this;e.option=$.extend({},i,t),e.$container=$(t.container),e.$items=e.$container.find(".mod-tab-item"),e.index=t.index||0,e.initTab()},initTab:function(){var t=this;t.cur(t.index,!0)},cur:function(t,i){{var e=this;e.option}return void 0===t&&void 0!==e.index?e._curItem():void(t>e.$items.length-1||(i=jsmod.detector.isAnimation()?i:!0,e.$items.eq(t).show().addClass("mod-tab-item-active").css("opacity",i?1:0).animate({opacity:1},e.option.animateCount).siblings(".mod-tab-item").removeClass("mod-tab-item-active").hide(),e.index=t,e.trigger("active",[t])))},_curItem:function(){return this.$items.eq(this.index)}},null,jsmod.ui.Base);t.jsmod.ui.Tab=e}(window),function(t){var i={maskIndex:1e3,contentBg:"#f2f2f2",isScreenClickHide:!0,isAnimation:!1,opacity:.7,direction:"vertical",horizontalFloat:"right"};t.jsmod.ui.Layer=jsmod.util.klass({initialize:function(t){var e=this,o=$(window).height(),n=$(window).width();e.option=$.extend({},i,t),e._callBackStack=[],e.option.isAnimation=jsmod.detector.isAnimation()?e.option.isAnimation:!1,e.$maskScreen=e.createScreenEl().appendTo("body").css("min-height",o).css("background-color","rgba(0, 0, 0,"+e.option.opacity+")"),e.$maskContent=e.createContent().appendTo(e.$maskScreen),"vertical"==e.option.direction?e.option.height?e.$maskContent.css("height",e.option.height):e.$maskContent.css("min-height",o):(e.$maskContent.css("min-height",o),e.option.width?e.$maskContent.css("width",e.option.width):e.$maskContent.css("width",n),e.$maskContent.css("float",e.option.horizontalFloat)),e.$maskDetail=e.$maskContent.find(".mod-layer-detail"),e.option.isScreenClickHide&&e.$maskScreen.on("tap.layer",function(t){t.target==e.$maskScreen.get(0)&&e.hide()}),jsmod.ui.Layer.addInstance(this),jsmod.ui.Layer.listen()},createContent:function(){var t='<div style="width: 100%; height: 100%; background-color: '+this.option.contentBg+'" class="mod-layer-content"><div class="mod-layer-detail"></div></div>';return $(t)},createScreenEl:function(){var t='<div class="mod-layer-screen"style="overflow:auto; display:none; position: fixed; left:0; top: 0; right:0; bottom: 0; z-index: '+this.option.maskIndex+';"></div>';return $(t)},reset:function(){var t,i=this;(i.option.height||!i.option.otherElement)&&(t=$(window).height()-i.$maskContent.prop("clientHeight"),i.option.isAnimation?i.$maskContent.css("-webkit-transform","translateY("+t+"px)"):i.$maskContent.css("margin-top",t+"px"))},isShown:function(){return!("none"==this.$maskScreen.css("display"))},show:function(t){var i,e=this,o=$(window).height();e.isShown()||this.trigger("beforeshow").isDefaultPrevented()||(e.option.isAnimation&&"vertical"==e.option.direction?(e.$maskScreen.show(),e.$maskContent.css("-webkit-transform","translateY("+o+"px)"),i=o-e.$maskContent.prop("clientHeight"),e.$maskContent.off($.fx.animationEnd),e.$maskContent.animate({"-webkit-transform":"translateY("+i+"px)"},300,"ease",function(){!e.option.height&&e.option.otherElement?("function"==(typeof e.option.otherElement).toLowerCase()?$(e.option.otherElement()).hide():$(e.option.otherElement).hide(),e.$maskScreen.css("position","relative")):e.$maskScreen.on("touchmove.layer",function(t){t.preventDefault()}),e.trigger("shown"),t&&t(e.$maskDetail),e.option.shownCallback&&e.option.shownCallback.apply(e)})):(e.$maskScreen.show(),!e.option.height&&e.option.otherElement?("function"==(typeof e.option.otherElement).toLowerCase()?$(e.option.otherElement()).hide():$(e.option.otherElement).hide(),e.$maskScreen.css("position","relative")):(i=o-e.$maskContent.prop("clientHeight"),e.$maskContent.css("margin-top",i+"px"),e.$maskScreen.on("touchmove.layer",function(t){t.preventDefault()})),e.trigger("shown"),t&&t(e.$maskDetail),e.option.shownCallback&&e.option.shownCallback.apply(e)))},hide:function(t){var i=this;this.trigger("beforehide").isDefaultPrevented()||i.isShown()&&(i.$maskScreen.off("touchmove.layer"),!i.option.height&&i.option.otherElement&&("function"==(typeof i.option.otherElement).toLowerCase()?$(i.option.otherElement()).show():$(i.option.otherElement).show()),i.$maskScreen.css("position","fixed"),i.option.isAnimation&&"vertical"==i.option.direction?(i.$maskContent.off($.fx.animationEnd),i.$maskScreen.animate({opacity:0}),i.$maskContent.animate({"-webkit-transform":"translateY("+$(window).height()+"px)"},300,"ease",function(){i.$maskScreen.css("opacity",1).hide(),i.trigger("hidden"),t&&t(i.$maskDetail),i.option.hiddenCallback&&i.option.hiddenCallback.apply(i)})):(i.$maskScreen.hide(),i.$maskContent.css("margin-top","0"),i.trigger("hidden"),t&&t(i.$maskDetail),i.option.hiddenCallback&&i.option.hiddenCallback.apply(i)))},getElement:function(){return this.$maskDetail},switchDisplay:function(){this.isShown()?this.hide():this.show()},destroy:function(){this.$maskScreen.remove()}},null,jsmod.ui.Base),jsmod.ui.Layer._instances=[],jsmod.ui.Layer.addInstance=function(t){-1==$.inArray(t,this._instances)&&(t._insI=jsmod.ui.Layer._instances.length,this._instances.push(t))},jsmod.ui.Layer.getInstances=function(){return this._instances},jsmod.ui.Layer.removeAll=function(){this._instances.forEach(function(t){t&&void 0!==t._insI&&(t.destroy(),delete jsmod.ui.Layer._instances[t._insI])}),this._isListening=!1,this.resizeTimer&&clearTimeout(this.resizeTimer),$(window).off("resize.layer")},jsmod.ui.Layer.listen=function(){var t=this;t._isListening||(t._isListening=!0,$(window).on("resize.layer",function(){t.resizeTimer&&clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){t.getInstances().forEach(function(t){t&&t.isShown()&&t.reset()})},300)}))}}(window);